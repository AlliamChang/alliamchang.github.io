---
title: 算法：100层和2个玻璃球
date: 2020-09-06 21:52:12
tags:
categories:
- 算法
---
在看面经的时候遇到了一个比较有趣的智力题：
    有一栋100层高的大楼，给你两个完全相同的玻璃球。假设从某一层开始，丢下玻璃球会摔碎。那么怎么利用手中的两个球，用什么最优策略知道这个临界的层是第几层
<!-- more -->

## 分析
这个题目其实有很多类似的衍生题，例如1到100之间有一个数字，一个人猜，另外一个人给一些辅助信息，如果这个人猜的数比指定的数小，则会告诉他小了，如果比指定的数大了，则会告诉他比这个数大了，并且以后再猜的话，只会告诉对错，不告诉大了还是小了。
借助网上看到的一些解析，首先我们判断这个题目：每次肯定是由低的楼层往高的楼层尝试，直到在楼层f(k)，第一个球已经碎掉了，记录上一个尝试的楼层为f(k-1),在此楼层，玻璃球不会碎，所以接下来要尝试 f(k-1)+1,f(k-1)+2,f(k-1)+3，....，直到有一个楼层碎了，这个楼层就是解啦，最坏的是到达f(k)-1 层。

接下来我们可以继续分析：既然第一次投掷（确定临界区）的次数必然会增加，那么，我们如何令第二次投掷（确定目标层）的次数随着第一次投掷的增加而减少。第一次投掷次数一次一次地增加，而第二次投掷次数一次次地减少，那么两次的投掷总数就会保持稳定，在总体上我们就能得到一个较稳定的尝试次数，即题目所求的最优策略。我们将这个分析转换成数学模型：
```
假设第一次投掷的楼层为f，总楼层为n
由于一次一次地减少投掷间隔的递增
则第i+1次投掷的楼层 f(i+1) = f+(f-1)+...+(f-i)
最后一次投掷的楼层 n = f+(f-1)+...+2+1
按照题意，楼层是100，则n=99(因为100层必然碎，不需要尝试)
所以，我们得到公式: f+(f-1)+...+2+1=99 即f(f+1)/2=99
解得 f=14(向上取整)
所以，第一次投掷的楼层分别是14，27，39，50，60，69，77，84，90，95，99
且 最大的尝试次数也是14
```  

## 证明
如果首次选择了14，我们可以最高判断到105层，总共是14次，如果到了105层还不碎，则只能继续往后一层层地尝试，最理想的是只有106层，即下层必碎，总共的尝试的次数为14次。如果在尝试投掷27层的时候碎掉，那么我们可以确定下临界区为(14, 27]，然后开始第二次的尝试，从15开始尝试到26，最多尝试总次数为2(第一次尝试)+12(第二次尝试)=14，其他的情况可以以此类推，所以在题目要求的100层楼内，我们能得到一个比较稳定的14次的尝试次数。
此外，这里有个界限的选择：100还是99，其实按照题意100层是必碎的，所以可以不用考虑100层的尝试，在某些特定情况下可能会有次数的差别(如105和106，按照公式算出来就会差1)。